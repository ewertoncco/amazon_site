<!-- Wappler include head-page="layouts/dashboard" bootstrap5="custom" is="dmx-app" id="adm_evento" appConnect="local" components="{dmxBootstrap5Modal:{},dmxNotifications:{},dmxFormatter:{},dmxValidator:{},dmxAnimateCSS:{},dmxDataTraversal:{}}" fontawesome_6="local" -->
<dmx-value id="var_step" dmx-bind:value="2"></dmx-value>
<dmx-serverconnect id="sc_status_evento" url="/api/eventos/ativar_desativar" noload="true"></dmx-serverconnect>
<dmx-data-detail id="data_detail_produto" dmx-bind:data="sc_dados_evento.data.dados_evento.produtos" key="id"></dmx-data-detail>
<div class="modal" id="editar_evento" is="dmx-bs5-modal" tabindex="-1">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">EDITAR {{sc_dados_evento.data.dados_evento.evento_nome}}</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body pt-0 pb-0">

                <form is="dmx-serverconnect-form" id="sc_editar_evento" method="post" action="/api/eventos/alterar_evento" dmx-generator="bootstrap5" dmx-form-type="vertical" dmx-on:success="editar_evento.hide();notifies1.success('Editado com sucesso!');sc_dados_evento.load({id_evento: query.id_evento})">
                    <dmx-form-data id="input_evento_id" name="id_evento" dmx-bind:data="sc_dados_evento.data.dados_evento.id"></dmx-form-data>



                    <div class="row align-items-center justify-content-center mt-2 mb-3" id="tabs">
                        <div class="col-2 position-relative">
                            <div class="progress" style="height: 4px; position: absolute; top: 50%; transform: translateY(-50%); width: 100%;">
                                <div class="progress-bar text-info bg-info" role="progressbar" style="width: 0%;" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" dmx-class:w-100="var_step.value&gt;1"></div>
                            </div>
                            <button type="button" class="btn btn-icon rounded-pill btn-light" dmx-class:text-bg-info="var_step.value+'&gt;=1'" dmx-style:cursor="'default'">1</button>
                        </div>
                        <div class="col-2 position-relative">
                            <div class="progress" style="height: 4px; position: absolute; top: 50%; transform: translateY(-50%); width: 100%;">
                                <div class="progress-bar bg-info" role="progressbar" style="width: 0%;" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" dmx-class:w-100="var_step.value&gt;2"></div>
                            </div>
                            <button type="button" class="btn btn-icon rounded-pill btn-light" dmx-class:text-bg-info="var_step.value&gt;=2" dmx-style:cursor="'default'">2</button>
                        </div>
                        <div class="col-2 position-relative">
                            <div class="progress" style="height: 4px; position: absolute; top: 50%; transform: translateY(-50%); width: 100%;">
                                <div class="progress-bar bg-info" role="progressbar" style="width: 0%;" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" dmx-class:w-100="var_step.value&gt;3"></div>
                            </div>
                            <button type="button" class="btn btn-icon rounded-pill btn-light" dmx-class:text-bg-info="var_step.value&gt;=3" dmx-style:cursor="'default'">3</button>
                        </div>
                        <div class="col-2 position-relative">
                            <button type="button" class="btn btn-icon btn-light rounded-pill" dmx-class:text-bg-info="var_step.value&gt;=4" dmx-style:cursor="'default'">4</button>
                        </div>
                    </div>

                    <div class="row mt-2 mb-2" id="step1" dmx-show="var_step.value==1">
                        <div class="form-group mb-3">
                            <label for="inp_evento_nome">Nome do Evento</label>
                            <input type="text" class="form-control" id="inp_evento_nome" name="evento_nome" aria-describedby="inp_evento_nome_help" required="" data-msg-required="Preenchimento obrigatório" dmx-bind:value="sc_dados_evento.data.dados_evento.evento_nome">
                        </div>
                        <div class="col">
                            <div class="form-group mb-3">
                                <label for="inp_evento_data_hora">Data e hora do evento</label>
                                <input type="datetime-local" class="form-control" id="inp_evento_data_hora" name="evento_data_hora" aria-describedby="inp_evento_data_hora_help" required="" data-msg-required="Preenchimento obrigatório" dmx-bind:value="sc_dados_evento.data.dados_evento.evento_data_hora.formatDate('yyyy-MM-ddTHH:mm:ss')">
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group mb-3">
                                <label for="inp_evento_local">Nome do Local do Evento</label>
                                <input type="text" class="form-control" id="inp_evento_local" name="evento_local" aria-describedby="inp_evento_local_help" required="" data-msg-required="Preenchimento obrigatório" dmx-bind:value="sc_dados_evento.data.dados_evento.evento_local">
                                <span class="font-13 text-muted">Ex: Amazon Club</span>
                            </div>
                        </div>


                        <div class="form-group mb-3">
                            <label for="inp_evento_resumo">Evento resumo</label>
                            <input type="text" class="form-control" id="inp_evento_resumo" name="evento_resumo" aria-describedby="inp_evento_resumo_help" required="" data-msg-required="Preenchimento obrigatório" dmx-bind:value="sc_dados_evento.data.dados_evento.evento_resumo">
                            <span class="font-13 text-muted">Ex: A Maior festa da região.</span>
                        </div>
                        <div class="form-group mb-3">
                            <label for="inp_evento_descricao">Evento descrição</label>

                            <div class="form-group">
                                <textarea class="form-control" id="inp_evento_descricao" rows="3" name="evento_descricao" required="" data-msg-required="Preenchimento obrigatório" dmx-bind:value="sc_dados_evento.data.dados_evento.evento_descricao"></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="row mt-2 mb-2" id="step2" dmx-show="var_step.value==2">
                        <div class="form-group mb-3">
                            <div class="row gap-1">
                                <div class="rounded-2 border-secondary-subtle text-center rounded-0 col-12 pt-1 pb-1 align-self-center">
                                    <div class="form-group mb-3 row">
                                        <div class="col-4">
                                            <img dmx-bind:src="editar_evento.sc_editar_evento.evento_banner_principal.file.dataUrl?editar_evento.sc_editar_evento.evento_banner_principal.file.dataUrl:sc_dados_evento.data.dados_evento.evento_banner_principal" class="img-fluid rounded shadow-sm">
                                        </div>
                                        <div class="col-sm-8 align-self-center text-start"><small id="input_bannerprimario" class="form-text text-muted">Banner principal *</small>
                                            <input type="file" class="form-control" id="evento_banner_principal" name="evento_banner_principal" aria-describedby="input_bannersecundario" required="" data-msg-required="Adicione uma imagem">

                                        </div>
                                    </div>

                                </div>
                                <div class="rounded-2 border-secondary-subtle col text-center rounded-0 pt-1 pb-1 align-self-center">
                                    <div class="form-group mb-3 row">
                                        <div class="col-4">
                                            <img dmx-bind:src="novo_evento.sc_novo_evento.evento_banner_secundario.file.dataUrl" class="img-fluid rounded shadow-sm">
                                        </div>
                                        <div class="col-sm-8 align-self-center text-start"><small id="input_bannersecundario" class="form-text text-muted">Banner secundario</small>
                                            <input type="file" class="form-control" id="evento_banner_secundario" name="evento_banner_secundario" aria-describedby="input_bannersecundario">

                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                        <div class="form-group mb-3">
                            <div class="row align-items-center gap-1">
                                <div class="align-self-center text-start col">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="1" id="inp_tem_mapa" name="tem_mapa">
                                        <label class="form-check-label mt-0 mb-0" for="inp_tem_mapa">Adicionar Mapa do evento</label>
                                    </div>
                                </div>
                                <div class="rounded-2 border-secondary-subtle text-center col-12 pt-1 pb-1 align-self-center" dmx-show="novo_evento.sc_novo_evento.inp_tem_mapa.checked">
                                    <div class="form-group mb-3 row">
                                        <div class="col-4">
                                            <img dmx-bind:src="novo_evento.sc_novo_evento.mapa_imagem.file.dataUrl" class="img-fluid rounded shadow-sm">
                                        </div>
                                        <div class="col-sm-8 align-self-center"><small id="input1_help" class="form-text text-muted">Mapa do evento</small>
                                            <input type="file" class="form-control" id="mapa_imagem" name="mapa_imagem" aria-describedby="input_bannersecundario" dmx-bind:required="novo_evento.sc_novo_evento.inp_tem_mapa.checked" data-rule-maxsize="500" data-msg-maxsize="Tamanho máximo 500 bytes">

                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>


                    </div>
                    <div class="row mt-2 mb-2" id="step3" dmx-show="var_step.value==3">

                        <div class="form-group mb-3">
                            <div class="row align-items-center">
                                <div class="col">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="inp_mostrar_whatsapp" name="mostrar_whatsapp" value="1" dmx-bind:checked="sc_dados_evento.data.dados_evento.mostrar_whatsapp">
                                        <label class="form-check-label mt-0 mb-0" for="inp_mostrar_whatsapp">Mostrar whatsapp?</label>
                                    </div>
                                </div>
                                <div class="col" dmx-show="novo_evento.sc_novo_evento.inp_mostrar_whatsapp.checked">
                                    <label for="inp_numero_whatsapp">Número whatsapp</label>
                                    <input type="text" class="form-control" id="inp_numero_whatsapp" name="numero_whatsapp" onkeyup="formatPhone(this)" placeholder="(00) 00000-0000" aria-describedby="inp_numero_whatsapp_help" dmx-bind:required="novo_evento.sc_novo_evento.inp_mostrar_whatsapp.checked" dmx-bind:value="sc_dados_evento.data.dados_evento.numero_whatsapp">
                                    <small id="bs5-form-group-help1" class="form-text text-muted">Será exibido na página</small>
                                </div>

                            </div>



                        </div>
                        <div class="form-group mb-3">
                            <div class="row">
                                <div class="col">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="inp_mostrar_sobre_evento" name="mostrar_sobre_evento" value="1" dmx-bind:checked="sc_dados_evento.data.dados_evento.mostrar_sobre_evento">
                                        <label class="form-check-label" for="inp_mostrar_sobre_evento">Mostrar descrição do Evento</label>
                                    </div>
                                </div>
                                <div class="col">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="inp_evento_destaque" name="evento_destaque" value="1" dmx-bind:checked="sc_dados_evento.data.dados_evento.evento_destaque">
                                        <label class="form-check-label" for="inp_evento_destaque">Destacar evento</label>
                                    </div>

                                </div>
                            </div>

                        </div>

                        <div class="form-group mb-3">
                            <div class="row">
                                <div class="col">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="inp_pode_alterar_ingresso" name="pode_alterar_ingresso" value="1" dmx-bind:checked="sc_dados_evento.data.dados_evento.pode_alterar_ingresso">
                                        <label class="form-check-label" for="inp_pode_alterar_ingresso">Pode alterar nome no ingresso</label>
                                    </div>
                                </div>
                                <div class="col">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="inp_pode_devolver_ingresso" name="pode_devolver_ingresso" value="1" dmx-bind:checked="sc_dados_evento.data.dados_evento.pode_devolver_ingresso">
                                        <label class="form-check-label" for="inp_pode_devolver_ingresso">Permitir reembolso</label>
                                    </div><small id="bs5-form-group-help1" class="form-text text-muted">Até 7 dias após a compra e menos de 48 horas antes do evento</small>
                                </div>
                            </div>

                        </div>
                        <div class="col">
                            <div class="form-group mb-3">

                                <select id="evento_status" class="form-select" dmx-bind:value="1" name="evento_status">
                                    <option value="1">Publicar agora</option>
                                    <option value="2">Publicar depois</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="row" id="step4" dmx-show="var_step.value==4">
                        <div class="form-group mb-3">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="inp_aceita_pix" name="aceita_pix" value="1" dmx-bind:checked="sc_dados_evento.data.dados_evento.aceita_pix">
                                <label class="form-check-label" for="inp_aceita_pix">Aceitar pagamento com Pix</label>
                            </div>
                        </div>
                        <div class="form-group mb-3">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="inp_aceita_cartao" name="aceita_cartao" value="1" dmx-bind:checked="sc_dados_evento.data.dados_evento.aceita_cartao">
                                <label class="form-check-label" for="inp_aceita_cartao">Aceitar pagamentos com cartão de crédito</label>
                            </div>
                        </div>
                        <div class="form-group mb-3" dmx-show="novo_evento.sc_novo_evento.inp_aceita_cartao.checked">

                            <label for="inp_qtide_parcelas_cartao">Quantidade de parcelas aceitas no cartão</label>
                            <select id="qtide_parcelas_cartao" class="form-select" name="qtide_parcelas_cartao" dmx-bind:value="sc_dados_evento.data.dados_evento.qtide_parcelas_cartao">
                                <option value="1">Somente à vista</option>
                                <option value="2">até 2x</option>
                                <option value="3">até 3x</option>
                                <option value="4">até 4x</option>
                                <option value="5">até 5x</option>
                            </select>
                        </div>
                    </div>
                    <div class="row justify-content-end align-items-center mb-3">
                        <div class="col-auto"><button id="btn6" class="btn" dmx-on:click="var_step.setValue(var_step.value-1)" dmx-hide="var_step.value==1">Voltar</button></div>
                        <div class="col-auto"><button id="btn7" class="btn btn-info" dmx-on:click="var_step.setValue(var_step.value+1)" dmx-hide="var_step.value == 4">Próximo</button>
                        </div>
                        <div class="col-auto"><button type="submit" class="btn btn-primary btn-lg" dmx-show="var_step.value==4">Criar evento</button></div>
                    </div>




















                </form>

            </div>

        </div>
    </div>
</div>
<div class="modal" id="deletar_item" is="dmx-bs5-modal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Deletar {{data_detail_produto.data.produto_nome}}</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <h5 class="text-center">Tem certeza que deseja deletar <b>{{data_detail_produto.data.produto_nome}}</b> ? </h5>
                <p class="text-center text-bg-light mt-3 pt-1 pb-1">Se foram vendidos itens, você não irá conseguir os dados corretamente. Prefira Desativar</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger mt-0 mb-0" dmx-on:click="run([{serverConnect:{name:'sc_deletar_produto',outputType:'object',url:'/api/eventos_produtos/deletar_produto',site:'amazon_ingressos',params:{id_produto:`data_detail_produto.data.id`,evento_id:`query.id_evento`}}},{run:{outputType:'text',action:`deletar_item.hide();notifies1.success(\'Produto deletado com sucesso!\');sc_dados_evento.load({})`}}])">Deletar</button>
            </div>
        </div>
    </div>
</div>
<div class="modal" id="deletar_evento" is="dmx-bs5-modal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Deletar Evento</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <h5 class="text-center">Tem certeza que deseja deletar <b>{{sc_dados_evento.data.dados_evento.evento_nome}}</b> ? </h5>
                <p class="text-center text-bg-danger mt-3 pt-1 pb-1 ps-2 pe-2">Se foram vendidos itens deste evento, você não irá conseguir os dados e vendas realizadas. Prefira Desativar</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger mt-0 mb-0" dmx-on:click="run([{serverConnect:{name:'sc_deletar_evento',outputType:'object',url:'/api/eventos/deletar_evento',site:'amazon_ingressos',params:{id:`query.id_evento`}}},{run:{outputType:'text',action:`notifies1.success(\'Evento deletado\');sc_dados_evento.reset();browser1.goto(\'/eventos\');editar_evento.hide()`}}])">Deletar</button>
            </div>
        </div>
    </div>
</div>
<dmx-datetime id="var1" interval="hours"></dmx-datetime>
<dmx-serverconnect id="sc_dados_evento" url="/api/eventos/dados_evento" dmx-param:id_evento="query.id_evento"></dmx-serverconnect>
<dmx-notifications id="notifies1"></dmx-notifications>
<div class="modal" id="novo_item" is="dmx-bs5-modal" tabindex="-1">
    <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">CADASTRAR ITEM</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form is="dmx-serverconnect-form" id="sc_novo_produto" method="post" action="/api/eventos_produtos/novo_produto" dmx-generator="bootstrap5" dmx-form-type="vertical" dmx-on:success="sc_novo_produto.reset();novo_item.hide();notifies1.success('Item inserido com sucesso!');sc_dados_evento.load({})">
                    <dmx-form-data id="inputData1" name="evento_id" dmx-bind:data="query.id_evento"></dmx-form-data>


                    <div class="row">

                        <div class="col-6">
                            <div class="form-group mb-3">
                                <label for="inp_produto_nome">Nome do item</label>
                                <input type="text" class="form-control" id="inp_produto_nome" name="produto_nome" aria-describedby="inp_produto_nome_help" dmxorgdomid="d488" required="" data-msg-required="Preenchimento Obrigatório!">
                            </div>
                        </div>
                        <div class="col-3">
                            <div class="form-group mb-3">
                                <label for="inp_qtide_cadastrada">Qtide disponível</label>
                                <input type="number" class="form-control" id="inp_qtide_cadastrada" name="qtide_cadastrada" aria-describedby="inp_qtide_cadastrada_help" dmxorgdomid="d492" required="" data-msg-required="Preenchimento Obrigatório!">
                            </div>
                        </div>
                        <div class="col-3">
                            <div class="form-group mb-3">
                                <label for="inp_valor">Valor</label>
                                <input id="inp_valor" name="valor" onkeyup="formatCurrency(this)" class="form-control" placeholder="R$ 0,00">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <div class="form-group mb-3">
                                <label for="inp_inicio_vendas">Início vendas</label>
                                <input type="datetime-local" class="form-control" id="inp_inicio_vendas" name="inicio_vendas" aria-describedby="inp_final_vendas_help" dmxorgdomid="d500" required="" data-msg-required="Preenchimento Obrigatório!" dmx-bind:value="var1.datetime">
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group mb-3">

                                <label for="inp_inicio_vendas">Final vendas</label>
                                <input type="datetime-local" class="form-control" id="inp_final_vendas" name="final_vendas" aria-describedby="inp_inicio_vendas_help" dmxorgdomid="d496" required="" data-msg-required="Preenchimento Obrigatório!" dmx-bind:min="novo_item.sc_novo_produto.inp_inicio_vendas.value">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <div class="form-group mb-3">

                                <label for="inp_ordem_lista">Ordem de exibição</label>
                                <select id="ordem_lista" class="form-select" name="ordem_lista">
                                    <option value="1">Posição 1</option>
                                    <option value="2">Posição 2</option>
                                    <option value="3">Posição 3</option>
                                    <option value="4">Posição 4</option>
                                    <option value="5">Posição 5</option>
                                    <option value="6">Posição 6</option>
                                    <option value="7">Posição 7</option>
                                    <option value="8">Posição 8</option>
                                    <option value="9">Posição 9</option>
                                    <option value="10">Posição 10</option>
                                </select>
                            </div>
                        </div>
                        <div class="col align-self-center">
                            <div class="form-group mb-0">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="1" id="inp_cortesia" name="cortesia" dmxorgdomid="d529">
                                    <label class="form-check-label" for="inp_cortesia">Cortesia</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <div class="form-group mb-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="1" id="inp_is_mesa" name="is_mesa" dmxorgdomid="d519">
                                    <label class="form-check-label" for="inp_is_mesa">É mesa/Camarote/...?</label>
                                </div>
                            </div>
                        </div>
                        <div class="col" dmx-show="novo_item.sc_novo_produto.inp_is_mesa.checked">
                            <div class="form-group mb-3">
                                <label for="inp_qtide_mesa">Qtide mesa/camarote/...</label>
                                <input type="number" class="form-control" id="inp_qtide_mesa" name="qtide_mesa" aria-describedby="inp_qtide_mesa_help" dmxorgdomid="d524" dmx-bind:required="novo_item.sc_novo_produto.inp_is_mesa.checked">

                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <div class="form-group mb-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="1" id="inp_cupom_ativo" name="cupom_ativo" dmxorgdomid="d535">
                                    <label class="form-check-label" for="inp_cupom_ativo">Tem cupom desconto?</label>
                                </div>
                            </div>
                        </div>
                        <div class="col" dmx-show="novo_item.sc_novo_produto.inp_cupom_ativo.checked">
                            <div class="form-group mb-3">
                                <label for="inp_codigo_cupom">Codigo cupom</label>
                                <input type="text" class="form-control" id="inp_codigo_cupom" name="codigo_cupom" aria-describedby="inp_codigo_cupom_help" dmxorgdomid="d540" dmx-bind:required="novo_item.sc_novo_produto.inp_cupom_ativo.checked">
                            </div>
                        </div>
                    </div>









                    <div class="form-group mb-3" dmx-show="novo_item.sc_novo_produto.inp_cupom_ativo.checked">
                        <label for="inp_valor_desconto">Valor desconto</label>
                        <input id="inp_valor_desconto" name="valor_desconto" class="form-control">
                    </div>
                    <div class="row justify-content-end">
                        <div class="offset-5 align-self-center col-auto">
                            <div class="form-group mt-0 mb-0">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="1" id="inp_ativo" name="ativo" dmxorgdomid="d513" dmx-bind:checked="true">
                                    <label class="form-check-label mb-0" for="inp_ativo">Ativar agora</label>
                                </div>
                            </div>
                        </div>
                        <div class="col-auto">
                            <div class="form-group text-end mb-0">
                                <button type="submit" class="btn btn-primary text-end" dmx-bind:disabled="state.executing" dmxorgdomid="d548">Salvar <span class="spinner-border spinner-border-sm" role="status" dmx-show="state.executing" dmxorgdomid="d549"></span></button>
                            </div>
                        </div>
                    </div>

                </form>
            </div>
        </div>
    </div>
</div>
<div class="modal" id="editar_item" is="dmx-bs5-modal" tabindex="-1">
    <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">EDITAR {{data_detail_produto.data.produto_nome}}</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form is="dmx-serverconnect-form" id="sc_editar_produto" method="post" action="/api/eventos_produtos/alterar_produto" dmx-generator="bootstrap5" dmx-form-type="vertical" dmx-on:success="sc_editar_produto.reset();editar_item.hide();notifies1.success('Alterado com sucesso!');sc_dados_evento.load({})">
                    <input id="inp_evento_id" name="evento_id" type="hidden" class="form-control" dmx-bind:value="data_detail_produto.data.evento_id">
                    <input id="inp_produto_id" name="id" type="hidden" class="form-control" dmx-bind:value="data_detail_produto.data.id">


                    <div class="row">

                        <div class="col-6">
                            <div class="form-group mb-3">
                                <label for="inp_produto_nome_edit">Nome do item</label>
                                <input type="text" class="form-control" id="inp_produto_nome_edit" name="produto_nome_edit" aria-describedby="inp_produto_nome_help" dmxorgdomid="d488" required="" data-msg-required="Preenchimento Obrigatório!" dmx-bind:value="data_detail_produto.data.produto_nome">
                            </div>
                        </div>
                        <div class="col-3">
                            <div class="form-group mb-3">
                                <label for="inp_qtide_cadastrada_edit">Qtide disponível</label>
                                <input type="number" class="form-control" id="inp_qtide_cadastrada_edit" name="qtide_cadastrada_edit" aria-describedby="inp_qtide_cadastrada_help" dmxorgdomid="d492" required="" data-msg-required="Preenchimento Obrigatório!" dmx-bind:value="data_detail_produto.data.qtide_cadastrada">
                            </div>
                        </div>
                        <div class="col-3">
                            <div class="form-group mb-3">
                                <label for="inp_valor_edit">Valor</label>
                                <input id="inp_valor_edit" name="valor_edit" onkeyup="formatCurrency(this)" class="form-control" placeholder="R$ 0,00" dmx-bind:value="data_detail_produto.data.valor.formatCurrency('R$ ', ',', '.', 2)">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <div class="form-group mb-3">
                                <label for="inp_inicio_vendas_edit">Início vendas</label>
                                <input type="datetime-local" class="form-control" id="inp_inicio_vendas_edit" name="inicio_vendas_edit" aria-describedby="inp_final_vendas_help" dmxorgdomid="d500" required="" data-msg-required="Preenchimento Obrigatório!" dmx-bind:value="data_detail_produto.data.inicio_vendas.formatDate('yyyy-MM-ddTHH:mm:ss')">
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group mb-3">

                                <label for="inp_inicio_vendas_edit">Final vendas</label>
                                <input type="datetime-local" class="form-control" id="inp_final_vendas_edit" name="final_vendas_edit" aria-describedby="inp_inicio_vendas_help" dmxorgdomid="d496" required="" data-msg-required="Preenchimento Obrigatório!" dmx-bind:min="editar_item.sc_editar_produto.inp_inicio_vendas_edit.value" dmx-bind:value="data_detail_produto.data.final_vendas.formatDate('yyyy-MM-ddTHH:mm:ss')">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <div class="form-group mb-3">

                                <label for="inp_ordem_lista">Ordem de exibição</label>
                                <select id="ordem_lista_edit" class="form-select" name="ordem_lista_edit" dmx-bind:value="data_detail_produto.data.ordem_lista">
                                    <option value="1">Posição 1</option>
                                    <option value="2">Posição 2</option>
                                    <option value="3">Posição 3</option>
                                    <option value="4">Posição 4</option>
                                    <option value="5">Posição 5</option>
                                    <option value="6">Posição 6</option>
                                    <option value="7">Posição 7</option>
                                    <option value="8">Posição 8</option>
                                    <option value="9">Posição 9</option>
                                    <option value="10">Posição 10</option>
                                </select>
                            </div>
                        </div>
                        <div class="col align-self-center">
                            <div class="form-group mb-0">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="1" id="inp_cortesia_edit" name="cortesia_edit" dmxorgdomid="d529" dmx-bind:value="data_detail_produto.data.cortesia">
                                    <label class="form-check-label" for="inp_cortesia_edit">Cortesia</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <div class="form-group mb-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="1" id="inp_is_mesa_edit" name="is_mesa_edit" dmxorgdomid="d519" dmx-bind:value="data_detail_produto.data.is_mesa">
                                    <label class="form-check-label" for="inp_is_mesa_edit">É mesa/Camarote/...?</label>
                                </div>
                            </div>
                        </div>
                        <div class="col" dmx-show="editar_item.sc_editar_produto.inp_is_mesa_edit.checked">
                            <div class="form-group mb-3">
                                <label for="inp_qtide_mesa_edit">Qtide mesa/camarote/...</label>
                                <input type="number" class="form-control" id="inp_qtide_mesa_edit" name="qtide_mesa_edit" aria-describedby="inp_qtide_mesa_help" dmxorgdomid="d524" dmx-bind:required="novo_item.sc_novo_produto.inp_is_mesa.checked" dmx-bind:value="data_detail_produto.data.qtide_mesa">

                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <div class="form-group mb-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="1" id="inp_cupom_ativo_edit" name="cupom_ativo_edit" dmxorgdomid="d535" dmx-bind:value="data_detail_produto.data.codigo_cupom">
                                    <label class="form-check-label" for="inp_cupom_ativo_edit">Tem cupom desconto?</label>
                                </div>
                            </div>
                        </div>
                        <div class="col" dmx-show="editar_item.sc_editar_produto.inp_cupom_ativo_edit.checked">
                            <div class="form-group mb-3">
                                <label for="inp_codigo_cupom_edit">Codigo cupom</label>
                                <input type="text" class="form-control" id="inp_codigo_cupom_edit" name="codigo_cupom_edit" aria-describedby="inp_codigo_cupom_help" dmxorgdomid="d540" dmx-bind:required="novo_item.sc_novo_produto.inp_cupom_ativo.checked" dmx-bind:value="data_detail_produto.data.codigo_cupom">
                            </div>
                        </div>
                    </div>









                    <div class="form-group mb-3" dmx-show="editar_item.sc_editar_produto.inp_cupom_ativo_edit.checked">
                        <label for="inp_valor_desconto_edit">Valor desconto</label>
                        <input id="inp_valor_desconto_edit" name="valor_desconto_edit" onkeyup="formatCurrency(this)" class="form-control" placeholder="R$ 0,00" dmx-bind:value="data_detail_produto.data.valor_desconto">
                    </div>
                    <div class="row justify-content-end">
                        <div class="offset-5 align-self-center col-auto">
                            <div class="form-group mt-0 mb-0">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="1" id="inp_ativo_edit" name="ativo_edit" dmxorgdomid="d513" dmx-bind:checked="data_detail_produto.data.ativo">
                                    <label class="form-check-label mb-0" for="inp_ativo_edit">Ativar agora</label>
                                </div>
                            </div>
                        </div>
                        <div class="col-auto">
                            <div class="form-group text-end mb-0">
                                <button type="submit" class="btn btn-primary text-end" dmx-bind:disabled="state.executing" dmxorgdomid="d548">Salvar alterações <span class="spinner-border spinner-border-sm" role="status" dmx-show="state.executing" dmxorgdomid="d549"></span></button>
                            </div>
                        </div>
                    </div>

                </form>
            </div>
        </div>
    </div>
</div>
<meta name="ac:route" content="/adm_evento/:id_evento">

<div class="card page-title-box rounded-0">
    <div class="d-flex justify-content-between align-items-center">
        <h4 class="font-18 fw-semibold mb-0">{{sc_dados_evento.data.dados_evento.evento_nome}}</h4>
        <div class="d-flex">




            <button type="button" class="btn waves-effect waves-light ms-2 btn-info" dmx-on:click="editar_evento.show()"><span class="btn-label"><i class="mdi mdi-pencil"></i>
                </span>Editar Evento</button>
            <button type="button" class="btn waves-effect waves-light ms-2 btn-info" dmx-on:click="modal1.show()"><span class="btn-label"><i class="mdi mdi-download"></i>
                </span>Lista Compradores</button>
            <button type="button" class="btn waves-effect waves-light ms-2 btn-danger" dmx-on:click="sc_status_evento.load({evento_id: query.id_evento, status: 3},true);notifies1.warning('Evento desativado');sc_status_evento.reset()" dmx-show="sc_dados_evento.data.dados_evento.evento_status==1"><span class="btn-label"><i class="mdi mdi-eye-off"></i>
                </span>&nbsp;Desativar</button>
            <button type="button" class="btn waves-effect waves-light ms-2 btn-success" dmx-on:click="run([{serverConnect:{name:'sc_atualiza_status',outputType:'object',url:'/api/eventos/ativar_desativar',site:'amazon_ingressos',params:{evento_id:`query.id_evento`,status:1}}},{run:{outputType:'text',action:`sc_dados_evento.load({id_evento: query.id_evento});notifies1.success(\'Evento publicado\')`}}])" dmx-show="sc_dados_evento.data.dados_evento.evento_status==3"><span class="btn-label"><i class="mdi mdi-power"></i>
                </span>&nbsp;Ativar Evento</button>
            <button id="btn3" class="btn ms-2 text-danger" dmx-on:click="deletar_evento.show()"><i class="fa-solid fa-trash-can fa-lg"></i></button>
        </div>
    </div>
</div>



<div class="row">
    <!-- end col -->

    <div class="col-xl-3 col-sm-6">
        <div class="card">
            <div class="card-body pt-2 pb-2 ps-3 pe-3">
                <div class="d-flex justify-content-between">
                    <div class="avatar-lg rounded-circle bg-primary widget-two-icon align-self-center">
                        <i class="mdi mdi-cash-sync avatar-title font-20 text-white"></i>
                    </div>

                    <div class="wigdet-two-content media-body text-end text-truncate">
                        <p class="m-0 text-uppercase fw-medium text-truncate" title="Statistics">TRANSAÇÕES</p>
                        <h3 class="fw-medium my-2"><span data-plugin="counterup">502</span></h3>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-sm-6">
        <div class="card">
            <div class="card-body pt-2 pb-2 ps-3 pe-3">
                <div class="d-flex justify-content-between">
                    <div class="avatar-lg rounded-circle bg-primary widget-two-icon align-self-center">
                        <i class="mdi mdi-cash-multiple avatar-title font-20 text-white"></i>
                    </div>

                    <div class="wigdet-two-content media-body text-end text-truncate">
                        <p class="m-0 text-uppercase fw-medium text-truncate" title="Statistics">VALOR LÍQUIDO</p>
                        <h3 class="fw-medium my-2">R$ 39.089,30</h3>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-sm-6">
        <div class="card">
            <div class="card-body pt-2 pb-2 ps-3 pe-3">
                <div class="d-flex justify-content-between">
                    <div class="avatar-lg rounded-circle bg-primary widget-two-icon align-self-center">
                        <i class="mdi mdi-cash-sync avatar-title font-20 text-white"></i>
                    </div>

                    <div class="wigdet-two-content media-body text-end text-truncate">
                        <p class="m-0 text-uppercase fw-medium text-truncate" title="Statistics">transações pix</p>
                        <h3 class="fw-medium my-2"><span data-plugin="counterup">264</span></h3>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-sm-6">
        <div class="card">
            <div class="card-body pt-2 pb-2 ps-3 pe-3">
                <div class="d-flex justify-content-between">
                    <div class="avatar-lg rounded-circle bg-primary widget-two-icon align-self-center">
                        <i class="mdi mdi-cash-multiple avatar-title font-20 text-white"></i>
                    </div>

                    <div class="wigdet-two-content media-body text-end text-truncate">
                        <p class="m-0 text-uppercase fw-medium text-truncate" title="Statistics">valor Total pix</p>
                        <h3 class="fw-medium my-2">R$ 18.448,20</h3>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-sm-6">
        <div class="card">
            <div class="card-body pt-2 pb-2 ps-3 pe-3">
                <div class="d-flex justify-content-between">
                    <div class="avatar-lg rounded-circle bg-primary widget-two-icon align-self-center">
                        <i class="mdi mdi-credit-card-settings-outline avatar-title font-20 text-white"></i>
                    </div>

                    <div class="wigdet-two-content media-body text-end text-truncate">
                        <p class="m-0 text-uppercase fw-medium text-truncate" title="Statistics">transações Crédito</p>
                        <h3 class="fw-medium my-2"><span data-plugin="counterup">242</span></h3>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-sm-6">
        <div class="card">
            <div class="card-body pt-2 pb-2 ps-3 pe-3">
                <div class="d-flex justify-content-between">
                    <div class="avatar-lg rounded-circle bg-primary widget-two-icon align-self-center">
                        <i class="mdi mdi-credit-card-settings-outline avatar-title font-20 text-white"></i>
                    </div>

                    <div class="wigdet-two-content media-body text-end text-truncate">
                        <p class="m-0 text-uppercase fw-medium text-truncate" title="Statistics">VALOR TOTAL crédito</p>
                        <h3 class="fw-medium my-2">R$ 16.732,17</h3>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-sm-6">
        <div class="card">
            <div class="card-body pt-2 pb-2 ps-3 pe-3">
                <div class="d-flex justify-content-between">
                    <div class="avatar-lg rounded-circle bg-primary widget-two-icon align-self-center">
                        <i class="mdi mdi-gift-open avatar-title font-20 text-white"></i>
                    </div>

                    <div class="wigdet-two-content media-body text-end text-truncate">
                        <p class="m-0 text-uppercase fw-medium text-truncate" title="Statistics">CORTESIAS</p>
                        <h3 class="fw-medium my-2"><span data-plugin="counterup">1</span></h3>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-sm-6">
        <div class="card">
            <div class="card-body pt-2 pb-2 ps-3 pe-3">
                <div class="d-flex justify-content-between">
                    <div class="avatar-lg rounded-circle bg-primary widget-two-icon align-self-center">
                        <i class="mdi mdi-sync avatar-title font-20"></i>
                    </div>

                    <div class="wigdet-two-content media-body text-end text-truncate">
                        <p class="m-0 text-uppercase fw-medium text-truncate" title="Statistics">DEVOLUÇÕES</p>
                        <h3 class="fw-medium my-2"><span data-plugin="counterup">11</span></h3>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- end col -->

    <!-- end col -->


</div>

<div class="col-lg-12 col-xl-NaN">
    <div class="card">
        <div class="card-header">
            <div class="d-flex justify-content-between align-items-center">
                <h4 class="header-title">Itens CADASTRADOS</h4><button type="button" class="btn waves-effect waves-light ms-2 btn-success" dmx-on:click="novo_item.show()"><span class="btn-label"><i class="mdi mdi-plus"></i>
                    </span>Novo item</button>
            </div>


        </div>
        <div class="card-body pt-2">
            <div class="table-responsive">
                <table class="table table-hover m-0 table-actions-bar">

                    <thead>
                        <tr>
                            <th>Nome</th>
                            <th>Valor</th>
                            <th>Início Vendas</th>
                            <th>Final Vendas</th>
                            <th class="text-center">Progresso</th>
                            <th class="text-center">Vendas</th>
                            <th class="text-center">Cortesias</th>
                            <th class="text-center">Action</th>
                        </tr>
                    </thead>
                    <tbody is="dmx-repeat" id="repeat1" dmx-bind:repeat="sc_dados_evento.data.dados_evento.produtos" key="id">
                        <tr>

                            <td>
                                <h5 class="m-0 fw-medium">{{produto_nome}}</h5>
                            </td>

                            <td><span class="text-warning">R$</span>{{(valor.toNumber() / 100).formatCurrency(' ', ',', '.', 2)}}</td>

                            </td>

                            <td><i class="mdi mdi-clock-outline text-success"></i>&nbsp; {{inicio_vendas.formatDate('dd/MM/yy HH:mm')}}</td>
                            <td><i class="mdi mdi-clock-outline text-danger"></i>{{' '+final_vendas.formatDate('dd/MM/yy HH:mm')}}</td>


                            <td>
                                <div class="d-flex flex-column">
                                    <h6 class="text-center">1 de 100</h6>
                                    <div class="progress">
                                        <div class="progress-bar bg-success" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                </div>
                            </td>
                            <td class="text-center"><span class="text-warning">R$</span>{{valor.toNumber().formatCurrency(' ', ',', '.', 2)}}</td>
                            <td class="text-center"></i>1</td>

                            <td class="text-center"><button id="btn1" class="btn pt-1 pb-1 ps-1 pe-1" dmx-on:click="data_detail_produto.select(id);editar_item.show()">
                                    <i class="fas fa-pen fa-lg"></i></button>
                                <button id="btn2" class="btn pt-1 pb-1 ps-1 pe-1 text-danger" dmx-on:click="data_detail_produto.select(id);deletar_item.show()">
                                    <i class="fas fa-trash-alt fa-lg"></i></button>
                                <a href="#" class="table-action-btn"></a>
                                <a href="#" class="table-action-btn"></a>
                            </td>
                        </tr>



                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <script src="assets/vendor/jquery-mask-plugin/jquery.mask.min.js"></script>
    <script src="assets/vendor/autonumeric/autoNumeric.min.js"></script>
    <script src="assets/js/pages/form-masks.js"></script>

    <script>
        function formatCurrency(input) {
        let value = input.value;

        // Remove todos os caracteres que não são dígitos
        value = value.replace(/[\D]+/g, "");

        // Adiciona o ponto decimal ao valor
        value = (value / 100).toFixed(2) + "";

        // Divide o valor em parte inteira e decimal
        let parts = value.split(".");
        let integerPart = parts[0];
        let decimalPart = parts[1];

        // Adiciona separadores de milhar
        integerPart = integerPart.replace(/\B(?=(\d{3})+(?!\d))/g, ".");

        // Atualiza o valor do campo de entrada com "R$"
        input.value = "R$ " + integerPart + "," + decimalPart;
    }
    </script>



</div>